 {%extends "base.html"%}

{% block title %} Home Page{% endblock %}

 {%block content%}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <style>
   .bg-success {
  background-color: #14b962 !important;
}
 

  
    img:hover {
      animation: shake 0.5s;
      animation-iteration-count: infinite;
    }

    @keyframes shake {
      0% {
        transform: translate(1px, 1px) rotate(0deg);
      }

      10% {
        transform: translate(-1px, -2px) rotate(-1deg);
      }

      20% {
        transform: translate(-3px, 0px) rotate(1deg);
      }

      30% {
        transform: translate(3px, 2px) rotate(0deg);
      }

      40% {
        transform: translate(1px, -1px) rotate(1deg);
      }

      50% {
        transform: translate(-1px, 2px) rotate(-1deg);
      }

      60% {
        transform: translate(-3px, 1px) rotate(0deg);
      }

      70% {
        transform: translate(3px, 1px) rotate(-1deg);
      }

      80% {
        transform: translate(-1px, -1px) rotate(1deg);
      }

      90% {
        transform: translate(1px, 2px) rotate(0deg);
      }

      100% {
        transform: translate(1px, -2px) rotate(-1deg);
      }
    }

    p {
      width: 30%;
      text-align: center;
      font-family: 'Roboto Mono', monospace;

      display: flex;
      justify-content: center;
      align-items: center;
    }

    del {
      text-decoration-color: red;
    }

    ins {
      text-decoration: none;
      font-family: 'Caveat', cursive;
      font-size: 1.5em;
      color: red;
      position: absolute;
      transform: rotate(-10deg);
      margin-left: -20px;
      margin-top: -40px;
    }

    body {
      margin: 0;
      padding: 0;
      background-color: rgb(102, 151, 118);
    }

    .ml6 {
      position: relative;
      font-weight: 900;
      font-size: 3.3em;
    }

    .ml6 .text-wrapper {
      position: relative;
      display: inline-block;
      padding-top: 0.2em;
      padding-right: 0.05em;
      padding-bottom: 0.1em;
      overflow: hidden;
      color: azure;
    }

    .ml6 .letter {
      display: inline-block;
      line-height: 1em;
    }

    .p {
      display: block;
      margin-left: above;
      margin-right: above;
    }

    .topnav {
      overflow: hidden;
      background-color: #333;
    }

    .topnav a {
      float: left;
      display: block;
      color: #f2f2f2;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
    }

    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }

    .topnav a.active {
      background-color: #04AA6D;
      color: white;
    }

    .topnav .icon {
      display: none;
    }

    @media screen and (max-width: 600px) {
      .topnav a:not(:first-child) {
        display: none;
      }

      .topnav a.icon {
        float: right;
        display: block;
      }
    }

    @media screen and (max-width: 600px) {
      .topnav.responsive {
        position: relative;
      }

      .topnav.responsive .icon {
        position: absolute;
        right: 0;
        top: 0;
      }

      .topnav.responsive a {
        float: none;
        display: block;
        text-align: left;
      }
    }

    /* Button used to open the chat form - fixed at the bottom of the page */
    .open-button {
      background-color: #555;
      color: white;
      padding: 16px 20px;
      border: none;
      cursor: pointer;
      opacity: 0.8;
      position: fixed;
      bottom: 23px;
      right: 28px;
      width: 280px;
    }

    /* The popup chat - hidden by default */
    .chat-popup {
      display: none;
      position: fixed;
      bottom: 0;
      right: 15px;
      border: 3px solid #f1f1f1;
      z-index: 9;
    }

    /* Add styles to the form container */
    .form-container {
      max-width: 300px;
      padding: 10px;
      background-color: white;
    }

    /* Full-width textarea */
    .form-container textarea {
      width: 90%;
      padding: 15px;
      margin: 5px 0 22px 0;
      border: none;
      background: #f1f1f1;
      resize: none;
      min-height: 100px;
    }

    /* When the textarea gets focus, do something */
    .form-container textarea:focus {
      background-color: #ddd;
      outline: none;
    }

    /* Set a style for the submit/send button */
    .form-container .btn {
      background-color: #04AA6D;
      color: white;
      padding: 16px 20px;
      border: none;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
      opacity: 0.8;
    }

    /* Add a red background color to the cancel button */
    .form-container .cancel {
      background-color: red;
    }

    /* Add some hover effects to buttons */
    .form-container .btn:hover,
    .open-button:hover {
      opacity: 1;
    }

    img {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
</style>
        <main class="flex-shrink-0">
          
            <button class="open-button" onclick="openForm()">Chat with us</button>
            
            <div class="chat-popup" id="myForm">
                <form action="post" class="form-container">
                    <h1>HiHealth Chatbot</h1>
            
                    </script>
                    <!-- Current Date and Time -->
                    Today's Current Date and Time is:
                    <br>
                    <span id='date-time'></span>.
                    <script>
                        var dt = new Date();
                        document.getElementById('date-time').innerHTML = dt;
                    </script>
            
                    <br>
                    <br>
                    <!-- User types message in here -->
                    <label for="msg"><b><i>Your Message:</i></b></label>
                    <textarea id="message" placeholder="Type your question here.." name="msg" required="required"></textarea>
                    <label for="msg"><b><i>HiHealth Bot Message:</i></b></label>
                    <label id="response" placeholder="How can I help you today?.." name="msg" required="required" disabled></label>
                    <button id="btnSend" type="button" class="btn">Send</button>
                    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
                </form>
            </div>
      
            
            <h1 class="ml6">
                <span class="text-wrapper">
                    <span class="letters">Welcome to HiHealth</span>
                </span>
            </h1>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
            
            
            <img src="/static/img/mascot.png" alt="Company's logo" class="img" width="460" height="397">
            <br>
            <br>
            <center>
                <p> The number on your weighing scale is<del> forever,</del> <ins>TEMPORARY</ins> but Good Health with our website
                    is everlasting.</p>
            </center>
            <br>
            <br>
            <br>
            </br>
            <i>&nbsp;&nbsp;&nbsp;Presenting HiHealth your one stop place to keep track of your calroies with a single app!</i>
            
            
            <script>
                // Wrap every letter in a span
                var textWrapper = document.querySelector('.ml6 .letters');
                textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

                anime.timeline({ loop: true })
                    .add({
                        targets: '.ml6 .letter',
                        translateY: ["1.1em", 0],
                        translateZ: 0,
                        duration: 750,
                        delay: (el, i) => 50 * i
                    }).add({
                        targets: '.ml6',
                        opacity: 0,
                        duration: 1000,
                        easing: "easeOutExpo",
                        delay: 1000
                    });

                function openForm() {
                    document.getElementById("myForm").style.display = "block";
                }

                function closeForm() {
                    document.getElementById("myForm").style.display = "none";
                }
            </script>
            <script>
                $(document).ready(function () {
                    $("#btnSend").click(function () {
                        //alert ("Success")
                        //Get
                        var inputmessage = $('#message').val();
                        var responsemessage = $('#response').getElementById;
                        if (inputmessage == "") {
                            //alert("Please input a message, field cannot be empty")
                            document.getElementById("response").innerHTML = "Please input a message, field cannot be empty"
                        }
                        else {
                            //alert(inputmessage)
                            fetch("http://it3100-181052n-mywebserver.australiaeast.azurecontainer.io/chatbot",
                                {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(
                                        {
                                            text: inputmessage
                                        }
                                    )
                                }
                            )
                                .then(response => response.json())
                                .then(result => {
                                    //alert(result.response)
                                    if (
                                        result.response == "health_greeting "
                                    ) {
                                        //responsemessage = "hello, welcome to HiHealth. What can I do for you today?"
                                        document.getElementById("response").innerHTML = "hello, welcome to HiHealth. What can I do for you today?"
                                        document.getElementById('message').value = "";
                                    }
                                    if (
                                        result.response == "health_abbreviation"
                                    ) {
                                        document.getElementById("response").innerHTML = "To know more about this app, please visit our <a href='/faq'>FAQ</a> Page here and to get in touch with our creators."
                                        //+ <button type ="button" onclick="alert('Hello world!')">Click Me!</button>

                                        document.getElementById('message').value = "";
                                    }
                                    if (
                                        result.response == "health_questions"
                                    ) {
                                        document.getElementById("response").innerHTML = "For Further enquiry regarding this question, please visit our <a href='/faq'>FAQ</a> Page here and to get in touch with our creators."

                                        document.getElementById('message').value = "";
                                    }
                                    if (
                                        result.response == "health_confidential"
                                    ) {
                                        document.getElementById("response").innerHTML = "We understand about your concern regarding your privacy. However, our app provides end-to-end encryption. So, all your data's are well protected and confidential and can only be accessed by you.To know more about this app, please visit our <a href='/faq'>FAQ</a> Page here and to get in touch with our creators."
                                        document.getElementById('message').value = "";
                                    }
                                    if (
                                        result.response == "health_plate"
                                    ) {
                                        document.getElementById("response").innerHTML = "To start of we encourage you to incorprate vegetables and fruits into your diet. Ultimately, your plate should have the 'Quarter,Quarter,Half!' diet plan.To read more about this, please visit our <a href='/faq'>FAQ</a> Page here and to get in touch with our creators."
                                        document.getElementById('message').value = "";
                                    }
                                    if (
                                        result.response == "health_farewell"
                                    ) {
                                        document.getElementById("response").innerHTML = "Have a nice day ahead! We hope to see you again. If you would like to know more, please visit our <a href='/faq'>FAQ</a> Page and to get in touch with our creators."
                                        document.getElementById('message').value = "";
                                    }
                                })
                        }
                    });
                });

            </script>

        </main>
 
{%endblock%}